1. Поиск телефонного номера (phone_pattern)
(?:\+(\d{1,3}))?\s*\(?(\d{3,5})\)?[\s-]*(\d{3})[\s-]*(\d{2})[\s-]*(\d{2})

(?:\+(\d{1,3}))?: Это незахватывающая группа (?: ...), которая может содержать знак + и 1-3 цифры. Это означает, что код страны (например, +7) может присутствовать, но не обязателен. Если код страны присутствует, он захватывается для дальнейшего использования.

\+ - символ плюса.

(\d{1,3}) - от 1 до 3 цифр, которые захватываются в качестве группы.

\s*: Пропускает любое количество пробельных символов (пробелы, табуляции и т.д.), чтобы учесть возможные пробелы между кодом страны и остальной частью номера.

\(?(\d{3,5})\)?: Захватывает 3-5 цифр, которые обозначают код города или зону. Скобки вокруг кода города являются необязательными.

[\s-]*: Пропускает любое количество пробелов или дефисов, которые могут использоваться в качестве разделителей между различными частями номера.

(\d{3}): Захватывает следующие три цифры номера.

[\s-]*: Снова пропускает любое количество пробелов или дефисов.

(\d{2}): Захватывает следующие две цифры номера.

[\s-]*: Снова пропускает пробелы или дефисы.

(\d{2}): Захватывает последние две цифры номера.

2. Проверка формата телефонного номера (valid_phone_pattern)
^(\+?\d{1,3})?\(?\d{1,5}\)?\d{1,3}-\d{2}-\d{2}$

^: Означает начало строки, гарантирует, что шаблон совпадает с начала строки.

(\+?\d{1,3})?: Необязательная группа, которая может содержать один +, за которым следуют от 1 до 3 цифр. Это предназначено для захвата кода страны, если он есть.

\(?: Необязательная открывающая скобка.

\d{1,5}: Захватывает от 1 до 5 цифр, что может быть кодом города или зоны.

\)?: Необязательная закрывающая скобка.

\d{1,3}: Следующие от 1 до 3 цифр номера.

-\d{2}-\d{2}: Остальная часть номера, разделенная дефисами, состоит из двух блоков по две цифры.

$: Означает конец строки, гарантирует, что совпадение происходит до конца строки.